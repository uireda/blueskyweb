{% extends 'tourism/base.html' %}
{% load static %}

{% block title %}{{ destination.name }} - Blue Sky Tourism{% endblock %}

{% block content %}
<section class="py-5 text-center text-white" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);">
  <div class="container">
    <h1 class="display-4 fw-bold mb-3">{{ destination.name }}</h1>
    <p class="lead mb-4">{{ destination.location }}</p>
  </div>
</section>
<div class="container py-5">
  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card shadow mb-4">
        {% if destination.image %}
          <img src="{{ destination.image.url }}" class="card-img-top" alt="{{ destination.name }}">
        {% endif %}
        <div class="card-body">
          <h3 class="fw-bold mb-3 text-primary">Description</h3>
          <p class="fs-5">{{ destination.description }}</p>
        </div>
      </div>
      {% if destination.hotels.all %}
      <div class="card shadow mb-4">
        <div class="card-body">
          <h5 class="fw-bold mb-3 text-primary">Hôtels proposés</h5>
          <ul class="list-group list-group-flush">
            {% for hotel in destination.hotels.all %}
            <li class="list-group-item">
              <strong>{{ hotel.name }}</strong> - {{ hotel.category }}<br>
              <span class="text-muted">{{ hotel.address }}</span>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}
    </div>
    <div class="col-lg-4">
      <div class="card shadow-lg sticky-top" style="top: 30px;">
        <div class="card-body">
          <h5 class="fw-bold mb-3">Offres disponibles</h5>
          {% for offer in destination.offers.all %}
            <div class="mb-3">
              <a href="{% url 'tourism:offer_detail' offer.id %}" class="btn btn-outline-primary w-100 rounded-pill mb-2">{{ offer.title }}</a>
              <div class="small text-muted">{{ offer.departure_date|date:"d/m/Y" }} - {{ offer.offer_price }}€</div>
            </div>
          {% empty %}
            <div class="alert alert-info">Aucune offre pour cette destination.</div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
