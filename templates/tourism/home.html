{% extends 'tourism/base.html' %}
{% load static %}
{% block content %}

<!-- HERO SECTION -->
<section class="position-relative" style="min-height: 60vh;">
  <img src="{% static 'tourism/img/hero-bg.jpg' %}" alt="Voyage" class="w-100 h-100 position-absolute top-0 start-0" style="object-fit:cover;filter:brightness(0.6);min-height:60vh;">
  <div class="container position-relative z-2" style="min-height: 60vh;">
    <div class="row align-items-center justify-content-center" style="min-height: 60vh;">
      <div class="col-lg-8 text-center text-white">
        <h1 class="display-2 fw-bold mb-3 text-shadow">Explorez le monde avec nous</h1>
        <p class="lead mb-4 fs-4 text-shadow">Des séjours inoubliables, des offres exclusives, des souvenirs pour la vie.</p>
        <a href="{% url 'tourism:offers_list' %}" class="btn btn-warning btn-lg rounded-pill fw-bold shadow">Voir toutes les offres</a>
      </div>
    </div>
  </div>
</section>

<!-- DESTINATIONS & OFFRES -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="row g-4">
      <div class="col-md-6">
        <div class="card border-0 shadow-lg h-100 hover-zoom">
          <img src="{% static 'tourism/img/hero1.jpg' %}" class="card-img-top" alt="Destinations" style="height:260px;object-fit:cover;">
          <div class="card-body">
            <h4 class="card-title fw-bold text-primary">Des destinations uniques</h4>
            <p class="card-text">Découvrez des lieux magiques, sélectionnés pour leur authenticité et leur beauté.</p>
            <a href="{% url 'tourism:destinations' %}" class="btn btn-outline-primary rounded-pill">Voir les destinations</a>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card border-0 shadow-lg h-100 hover-zoom">
          <img src="{% static 'tourism/img/hero2.jpg' %}" class="card-img-top" alt="Offres" style="height:260px;object-fit:cover;">
          <div class="card-body">
            <h4 class="card-title fw-bold text-primary">Nos offres spéciales</h4>
            <p class="card-text">Profitez de tarifs exclusifs sur nos séjours à dates fixes et services premium.</p>
            <a href="{% url 'tourism:offers_list' %}" class="btn btn-outline-primary rounded-pill">Voir les offres</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- SECTION CONTACT -->
<section class="py-5" id="contact" style="background: linear-gradient(135deg, #e0e7ef 60%, #f8fafc 100%);">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-7">
        <div class="card shadow border-0">
          <div class="card-body p-4">
            <h2 class="fw-bold mb-4 text-primary text-center">Contactez-nous</h2>
            <form method="post" action="{% url 'tourism:contact' %}">
              {% csrf_token %}
              {{ contact_form.non_field_errors }}
              <div class="mb-3">
                {{ contact_form.name.label_tag }}
                {{ contact_form.name }}
                {{ contact_form.name.errors }}
              </div>
              <div class="mb-3">
                {{ contact_form.email.label_tag }}
                {{ contact_form.email }}
                {{ contact_form.email.errors }}
              </div>
              <div class="mb-3">
                {{ contact_form.message.label_tag }}
                {{ contact_form.message }}
                {{ contact_form.message.errors }}
              </div>
              <button type="submit" class="btn btn-primary w-100 rounded-pill fw-bold">Envoyer</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- SECTION AVIS CLIENTS -->
<section class="py-5 bg-white" id="avis">
  <div class="container">
    <h2 class="fw-bold mb-5 text-primary text-center">Ils nous ont fait confiance</h2>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div id="carouselTestimonials" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            {% for testimonial in testimonials %}
              <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <div class="card border-0 shadow-sm">
                  <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                      <img src="{% static 'tourism/img/avatar.png' %}" alt="Avatar" class="rounded-circle me-2" style="width:48px;height:48px;object-fit:cover;">
                      <div>
                        <strong>{{ testimonial.client_name }}</strong>
                        {% if testimonial.client_city %}
                          <span class="text-muted ms-2">{{ testimonial.client_city }}</span>
                        {% endif %}
                        <span class="text-warning ms-2">
                          {% for _ in testimonial.stars_range %}<i class="fas fa-star"></i>{% endfor %}
                        </span>
                      </div>
                    </div>
                    <blockquote class="blockquote mb-0">
                      <p class="mb-1 fs-5">“{{ testimonial.comment }}”</p></p>
                      <footer class="blockquote-footer">{{ testimonial.created_at|date:"d/m/Y" }}</footer>
                    </blockquote>
                  </div>
                </div>
              </div>
            {% empty %}
              <div class="carousel-item active">
                <div class="card border-0 shadow-sm">
                  <div class="card-body">
                    <p class="text-center text-muted mb-0">Aucun avis pour le moment.</p>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          {% if testimonials|length > 1 %}
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselTestimonials" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselTestimonials" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Effet zoom sur hover pour les cartes -->
<style>
.hover-zoom:hover {
  transform: scale(1.03);
  transition: transform 0.3s;
}
.text-shadow {
  text-shadow: 0 2px 8px rgba(0,0,0,0.25);
}
.carousel-control-prev,
.carousel-control-next {
  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
  opacity: 1 !important;
}
.carousel-control-prev-icon,
.carousel-control-next-icon {
  background-color: #1e3c72;
  border-radius: 50%;
  width: 2.5rem;
  height: 2.5rem;
}
#carouselTestimonials {
  position: relative;
}
#carouselTestimonials .carousel-control-prev,
#carouselTestimonials .carousel-control-next {
  top: 50%;
  transform: translateY(-50%);
  width: 3rem;
  height: 3rem;
  opacity: 1 !important;
  z-index: 2;
}
#carouselTestimonials .carousel-control-prev {
  left: -3.5rem;
}
#carouselTestimonials .carousel-control-next {
  right: -3.5rem;
}
@media (max-width: 991px) {
  #carouselTestimonials .carousel-control-prev,
  #carouselTestimonials .carousel-control-next {
    left: 0 !important;
    right: 0 !important;
    width: 2.5rem;
    height: 2.5rem;
  }
}
</style>

{% endblock %}
